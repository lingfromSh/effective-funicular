{"_id":"note:Afpg96_LI","title":"图像增强-图像锐化","content":"# 图像增强- 图像去噪 (Image Sharpness)\n\n将中心像素从边缘得到的影响去除，保留中心像素值就是锐化\n\n## 简单卷积核锐化\n\n保证卷积核矩阵为1，确保亮度不变。\n\n```python\nimport enum\nimport cv2 as cv\nimport numpy as np\nfrom functools import partial\n\nEXIT_KEY = 27\n\n\nclass Direction(enum.Enum):\n\n    ALL = 0\n    HORIZONAL = 1\n    VERTICAL = 2\n\n\ndef get_kernel(direction: Direction):\n    direction = Direction(direction)\n    if direction == Direction.ALL:\n        kernel = np.array(\n            [\n                [-2, -2, -2],\n                [-2, 17, -2],\n                [-2, -2, -2]\n            ]\n        )\n    elif direction == Direction.HORIZONAL:\n        kernel = np.array(\n            [\n                [1, 1, 1],\n                [0, 0, 0],\n                [-1, -1, -1]\n            ]\n        )\n    elif direction == Direction.VERTICAL:\n        kernel = np.array(\n            [\n                [1, 0, -1],\n                [1, 0, -1],\n                [1, 0, -1]\n            ]\n        )\n    else:\n        raise TypeError(\"No proper direction\")\n    \n    return kernel\n\n\ndef simple_sharpness(image_path, direction: Direction = Direction.ALL):\n    # Read image data\n    image = cv.imread(image_path)\n\n    # Convert image to Gray\n    gray_image = cv.cvtColor(image, cv.COLOR_RGB2GRAY)\n\n    # Simple Kernel\n    kernel = get_kernel(direction)\n    simple_sharpen = cv.filter2D(image, -1, kernel)\n    simple_gray_sharpen = cv.filter2D(gray_image, -1, kernel)\n\n    cv.imshow(\"Original\", image)\n    cv.imshow(\"Gray\", gray_image)\n    cv.imshow(\"Sharpness\", simple_sharpen)\n    cv.imshow(\"Gray Sharpness\", simple_gray_sharpen)\n\n    if cv.waitKey(0) == EXIT_KEY:\n        exit(0)\n\n\nsimple_sharpness_all_direction = partial(simple_sharpness, direction=Direction.ALL)\nsimple_sharpness_horizonal_direction = partial(simple_sharpness, direction=Direction.HORIZONAL)\nsimple_sharpness_vertical_direction = partial(simple_sharpness, direction=Direction.VERTICAL)\n\n```\n\n#### 全方向锐化效果\n\n![全方向锐化效果](/home/ling/BoostNote/images/simple-sharpness.png)\n\n#### 水平方向锐化效果\n\n![水平方向锐化效果](/home/ling/BoostNote/images/simple-sharpness-horizonal.png)\n\n#### 垂直方向锐化效果\n\n![垂直方向锐化效果](/home/ling/BoostNote/images/simple-sharpness-vertical.png)\n","tags":[],"folderPathname":"/图像处理","data":{},"createdAt":"2020-12-06T06:09:20.439Z","updatedAt":"2020-12-06T07:18:04.928Z","trashed":false,"_rev":"pcB10NaLz"}