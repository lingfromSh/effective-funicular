---
title: "灰度共生矩阵"
tags: ""
---

# 灰度共生矩阵 (Gray-level co-occurrence matrix) GLCM

灰度直方图是对图像上单个像素具有某个灰度进行统计的结果，而灰度共生矩阵是对图像上保持某距离的两像素分别具有某灰度的状况进行统计得到的。

## 作用

用于表示灰度的空间相关性特性。描述纹理特征。

可以用一个向量将以上特征综合在一起，这将是对图像的特征的一种描述，可以进一步用来进行识别，分类，检索等。

## 数学公式

灰度直方图是对图像上单个像素具有某个灰度进行统计的结果，而灰度共生矩阵是对图像上保持某距离的两像素分别具有某灰度的状况进行统计得到的。

取图像(N×N)中任意一点 （x，y）及偏离它的另一点 （x+a，y+b），设该点对的灰度值为 （g1，g2）。令点（x，y） 在整个画面上移动，则会得到各种 （g1，g2）值，设灰度值的级数为 k，则（g1，g2） 的组合共有 k 的平方种。

对于整个画面，统计出每一种 （g1，g2）值出现的次数，然后排列成一个方阵，再用（g1，g2） 出现的总次数将它们归一化为出现的概率P（g1，g2） ，这样的方阵称为灰度共生矩阵。距离差分值（a，b） 取不同的数值组合，可以得到不同情况下的联合概率矩阵。（a，b） 取值要根据纹理周期分布的特性来选择，对于较细的纹理，选取（1，0）、（1，1）、（2，0）等小的差分值。

当 a=1，b=0时，像素对是水平的，即0度扫描；当a=0，b=1 时，像素对是垂直的，即90度扫描；当 a=1，b=1时，像素对是右对角线的，即45度扫描；当 a=-1，b=1时，像素对是左对角线，即135度扫描。
这样，两个象素灰度级同时发生的概率，就将 （x，y）的空间坐标转化为“灰度对” （g1，g2）的描述，形成了灰度共生矩阵。
实验中对灰度共生矩阵进行了如下的归一化：

![公式](/home/ling/BoostNote/images/灰度共生矩阵.jpeg)

## 特性

1.  能量(angular second moment)
2.  对比度(contrast)
3.  逆差矩（inverse different moment）
4.  熵（entropy）
5.  自相关（correlation）

## 计算特征值步骤

1.  滑动窗口选择
    灰度共生矩阵的纹理分析方法需要选择一定大小的滑动窗口，这里对于每一个特征都以5X5和7X7滑动窗口进行了计算。
2.  步距的选择
    通过试验与比较采用d=1的步距比较合适。即中心像元同与之直接相邻的像元做运算和比较。
3.  方向的选择
    通常计算灰度共生矩阵的方向取0° ,45°，90° , 135°四个方向。若是不对这四个方向综合，则在每一方向上都可以得到多类特征，这样得到纹理特征过于繁多，不利于使用。因而又可以对这四个方向的特征值取平均值，通过比较本文取了四个方向的平均值作为最终的特征值共生矩阵。

纹理特征影像生成的主要思想是:用每一个小窗口形成的子影像，通过纹理特征计算程序计算小窗口影像灰度共生矩阵和纹理特征值，然后将代表这个窗口纹理特征值赋值给窗口的中心点，这就完成了第一小窗口的纹理特征计算。然后窗口被移动一个像素形成另外一个小的窗口影像，再重复计算新共生矩阵和纹理特征值。依次类推，这样整个图象就会形成一个由纹理特征值做成的一个纹理特征值矩阵，然后将这个纹理特征值矩阵转换成纹理特征影像。

![计算步骤](/home/ling/BoostNote/images/灰度共生矩阵纹理计算.png)
